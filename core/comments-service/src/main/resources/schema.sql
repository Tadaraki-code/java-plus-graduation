DROP TABLE IF EXISTS comments CASCADE;

CREATE TABLE IF NOT EXISTS comments (
   id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
   text VARCHAR(255) NOT NULL CHECK (length(text) >= 5 AND length(text) <= 255),
   status VARCHAR(10) NOT NULL,
   created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   event_id BIGINT NOT NULL,
   author_id BIGINT NOT NULL,
   author_name VARCHAR(255) NOT NULL CHECK (length(text) >= 5 AND length(text) <= 255),
   CONSTRAINT uk_author_event UNIQUE (author_id, event_id)
);
